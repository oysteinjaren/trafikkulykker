(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{46:function(e,t,n){e.exports=n(86)},51:function(e,t,n){},52:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(15),o=n.n(l),c=(n(51),n(26)),i=n(29),u=(n(52),n(16)),s=n.n(u),d=n(20),k=n(17),g=n(2),m=n.n(g),v=n(27),p=n(42),f=n.n(p),h=n(44),E=n(28);var b=function(e){var t,n=e.aktivUlykke,a=e.onClose;return r.a.createElement(E.a,{position:[n.koordinater.lat,n.koordinater.lon],onClose:a,autoPan:!1},r.a.createElement("h2",null,"Mc ulykke"===n.uhellKategori?"MC-ulykke":n.uhellKategori," (",n.ulykkesdato,")"),r.a.createElement("h3",null,n.ulykkeskode),r.a.createElement("span",null,1===(t=n.antallEnheter)?"1 involvert enhet":"".concat(t," involverte enheter")),r.a.createElement("br",null),n.antallDrepte>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,function(e){return 1===e?"1 drept":"".concat(e," drepte")}(n.antallDrepte)),r.a.createElement("br",null)),n.antallMegetAlvorligSkadde>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,function(e){return 1===e?"1 meget alvorlig skadd":"".concat(e," meget alvorlig skadde")}(n.antallMegetAlvorligSkadde)),r.a.createElement("br",null)),n.antallAlvorligSkadde>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,function(e){return 1===e?"1 alvorlig skadd":"".concat(e," alvorlig skadde")}(n.antallAlvorligSkadde)),r.a.createElement("br",null)),n.antallLettereSkadde>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,function(e){return 1===e?"1 lettere skadd":"".concat(e," lettere skadde")}(n.antallLettereSkadde)),r.a.createElement("br",null)),"USKADET"===n.alvorlighetsgrad&&r.a.createElement("span",null,"Ingen skadde"),"IKKEREGISTRERT"===n.alvorlighetsgrad&&r.a.createElement("span",null,"Alvorlighetsgrad ikke registrert"))},w=n(45),y=n.n(w),S=function(e){var t,n=null===e||void 0===e||null===(t=e.geometri)||void 0===t?void 0:t.wkt,a=(null===n||void 0===n?void 0:n.split(/[()]/))[1];if(!a)return null;var r=a.split(" ");return{lat:parseFloat(r[0]),lon:parseFloat(r[1])}},j=function(e,t){var n,a=null===e||void 0===e||null===(n=e.egenskaper)||void 0===n?void 0:n.find((function(e){return e.id===t}));return null===a||void 0===a?void 0:a.verdi},A=function(e){return j(e,5055)},x=function(e){return j(e,5065)},C=function(e){return j(e,5066)},M=function(e){return j(e,5069)},O=function(e){return j(e,5070)},F=function(e){return j(e,5071)},I=function(e){return j(e,5072)},K=function(e){return j(e,5073)},D=function(e){return j(e,5074)},z=function(){var e=Object(d.a)(s.a.mark((function e(t,n,a,r){var l,o,c,i,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=[],o=!0,c="",i={srid:"wgs84",inkluder:"geometri,egenskaper",kartutsnitt:"".concat(t,",").concat(n,",").concat(a,",").concat(r),egenskap:"(5055>='2019-01-01')AND(5055<='2019-12-31')"};case 4:if(!0!==o){e.next=13;break}return""!==c&&(i.start=c),e.next=8,y.a.get("https://nvdbapiles-v3.atlas.vegvesen.no/vegobjekter/570",{headers:{"X-Client":"trafikkulykker.no"},params:i});case 8:u=e.sent,l=l.concat(u.data.objekter),c!==u.data.metadata.neste.start?c=u.data.metadata.neste.start:o=!1,e.next=4;break;case 13:return console.log("Hentet ".concat(l.length," ulykker")),console.log(l),e.abrupt("return",l.map((function(e){return{id:e.id,koordinater:S(e),ulykkesdato:A(e),uhellKategori:x(e),ulykkeskode:C(e),antallEnheter:M(e),antallDrepte:O(e),antallMegetAlvorligSkadde:F(e),antallAlvorligSkadde:I(e),antallLettereSkadde:K(e),alvorlighetsgrad:D(e)}})));case 16:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}();var L=function(){var e=Object(h.useLeafletBounds)(),t=Object(k.a)(e,2),n=Object(k.a)(t[0],2),l=n[0],o=n[1],c=Object(k.a)(t[1],2),i=c[0],u=c[1],p=Object(a.useState)([]),E=Object(k.a)(p,2),w=E[0],y=E[1],S=r.a.useState(null),j=Object(k.a)(S,2),A=j[0],x=j[1];function C(e){var t="";switch(e){case"Uskadd":t="images/marker-icon-green.png";break;case"Lettere skadd":t="images/marker-icon-yellow.png";break;case"Alvorlig skadd":t="images/marker-icon-orange.png";break;case"Meget alvorlig skadd":t="images/marker-icon-red.png";break;case"Drept":t="images/marker-icon-black.png";break;default:t="images/marker-icon-gray.png"}return new g.Icon({iconUrl:t,iconSize:[25,41],iconAnchor:[12,40]})}return Object(a.useEffect)((function(){Object(d.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(o,l,u,i);case 2:t=e.sent,y(t.filter((function(e){return null!=e.koordinater})));case 4:case"end":return e.stop()}}),e)})))()}),[o,l,u,i]),r.a.createElement(f.a,{iconCreateFunction:function(e){var t=e.getChildCount(),n=Math.max(Math.sqrt(700*t/Math.PI),0);return m.a.divIcon({html:"<span>".concat(e.getChildCount(),"</span>"),className:"marker-cluster-custom",iconSize:m.a.point(n,n,!0)})}},w&&w.map((function(e){return r.a.createElement(v.a,{key:e.id,position:[e.koordinater.lat,e.koordinater.lon],icon:C(e.alvorlighetsgrad),onclick:function(){x(e)}})})),A&&r.a.createElement(b,{aktivUlykke:A,onClose:function(){x(null)}}))};var U=function(){return r.a.createElement(c.a,{center:[63.430515,10.395053],zoom:12},r.a.createElement(i.a,{url:"https://opencache.statkart.no/gatekeeper/gk/gk.open_gmaps?layers=norges_grunnkart&zoom={z}&x={x}&y={y}",attribution:"<a href='https://www.kartverket.no/'>Kartverket</a>"}),r.a.createElement(L,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[46,1,2]]]);
//# sourceMappingURL=main.5ba29187.chunk.js.map