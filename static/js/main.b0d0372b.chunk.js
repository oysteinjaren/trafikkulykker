(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{46:function(e,t,n){e.exports=n(86)},51:function(e,t,n){},52:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(15),o=n.n(l),c=(n(51),n(26)),i=n(29),u=(n(52),n(16)),s=n.n(u),d=n(20),k=n(17),g=n(27),m=n(42),v=n.n(m),p=n(44),f=n(2),h=n(28);var E=function(e){var t,n=e.aktivUlykke,a=e.onClose;return r.a.createElement(h.a,{position:[n.koordinater.lat,n.koordinater.lon],onClose:a,autoPan:!1},r.a.createElement("h2",null,"Mc ulykke"===n.uhellKategori?"MC-ulykke":n.uhellKategori," (",n.ulykkesdato,")"),r.a.createElement("h3",null,n.ulykkeskode),r.a.createElement("span",null,1===(t=n.antallEnheter)?"1 involvert enhet":"".concat(t," involverte enheter")),r.a.createElement("br",null),n.antallDrepte>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,function(e){return 1===e?"1 drept":"".concat(e," drepte")}(n.antallDrepte)),r.a.createElement("br",null)),n.antallMegetAlvorligSkadde>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,function(e){return 1===e?"1 meget alvorlig skadd":"".concat(e," meget alvorlig skadde")}(n.antallMegetAlvorligSkadde)),r.a.createElement("br",null)),n.antallAlvorligSkadde>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,function(e){return 1===e?"1 alvorlig skadd":"".concat(e," alvorlig skadde")}(n.antallAlvorligSkadde)),r.a.createElement("br",null)),n.antallLettereSkadde>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,function(e){return 1===e?"1 lettere skadd":"".concat(e," lettere skadde")}(n.antallLettereSkadde)),r.a.createElement("br",null)),"USKADET"===n.alvorlighetsgrad&&r.a.createElement("span",null,"Ingen skadde"),"IKKEREGISTRERT"===n.alvorlighetsgrad&&r.a.createElement("span",null,"Alvorlighetsgrad ikke registrert"))},b=n(45),w=n.n(b),y=function(e){var t,n=null===e||void 0===e||null===(t=e.geometri)||void 0===t?void 0:t.wkt,a=(null===n||void 0===n?void 0:n.split(/[()]/))[1];if(!a)return null;var r=a.split(" ");return{lat:parseFloat(r[0]),lon:parseFloat(r[1])}},S=function(e,t){var n,a=null===e||void 0===e||null===(n=e.egenskaper)||void 0===n?void 0:n.find((function(e){return e.id===t}));return null===a||void 0===a?void 0:a.verdi},j=function(e){return S(e,5055)},A=function(e){return S(e,5065)},O=function(e){return S(e,5066)},x=function(e){return S(e,5069)},K=function(e){return S(e,5070)},M=function(e){return S(e,5071)},D=function(e){return S(e,5072)},F=function(e){return S(e,5073)},C=function(e){return S(e,5074)},I=function(){var e=Object(d.a)(s.a.mark((function e(t,n,a,r){var l,o,c,i,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=[],o=!0,c="",i={srid:"wgs84",inkluder:"geometri,egenskaper",kartutsnitt:"".concat(t,",").concat(n,",").concat(a,",").concat(r),egenskap:"(5055>='2019-01-01')AND(5055<='2019-12-31')"};case 4:if(!0!==o){e.next=13;break}return""!==c&&(i.start=c),e.next=8,w.a.get("https://nvdbapiles-v3.atlas.vegvesen.no/vegobjekter/570",{headers:{"X-Client":"trafikkulykker.no"},params:i});case 8:u=e.sent,l=l.concat(u.data.objekter),c!==u.data.metadata.neste.start?c=u.data.metadata.neste.start:o=!1,e.next=4;break;case 13:return console.log("Hentet ".concat(l.length," ulykker")),console.log(l),e.abrupt("return",l.map((function(e){return{id:e.id,koordinater:y(e),ulykkesdato:j(e),uhellKategori:A(e),ulykkeskode:O(e),antallEnheter:x(e),antallDrepte:K(e),antallMegetAlvorligSkadde:M(e),antallAlvorligSkadde:D(e),antallLettereSkadde:F(e),alvorlighetsgrad:C(e)}})));case 16:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}();var L=function(){var e=Object(p.useLeafletBounds)(),t=Object(k.a)(e,2),n=Object(k.a)(t[0],2),l=n[0],o=n[1],c=Object(k.a)(t[1],2),i=c[0],u=c[1],m=Object(a.useState)([]),h=Object(k.a)(m,2),b=h[0],w=h[1],y=r.a.useState(null),S=Object(k.a)(y,2),j=S[0],A=S[1];function O(e){var t="";switch(e){case"Uskadd":t="images/marker-icon-green.png";break;case"Lettere skadd":t="images/marker-icon-yellow.png";break;case"Alvorlig skadd":t="images/marker-icon-orange.png";break;case"Meget alvorlig skadd":t="images/marker-icon-red.png";break;case"Drept":t="images/marker-icon-black.png";break;default:t="images/marker-icon-gray.png"}return new f.Icon({iconUrl:t,iconSize:[25,41],iconAnchor:[12,40]})}return Object(a.useEffect)((function(){Object(d.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(o,l,u,i);case 2:t=e.sent,w(t.filter((function(e){return null!=e.koordinater})));case 4:case"end":return e.stop()}}),e)})))()}),[o,l,u,i]),r.a.createElement(v.a,null,b&&b.map((function(e){return r.a.createElement(g.a,{key:e.id,position:[e.koordinater.lat,e.koordinater.lon],icon:O(e.alvorlighetsgrad),onclick:function(){A(e)}})})),j&&r.a.createElement(E,{aktivUlykke:j,onClose:function(){A(null)}}))};var U=function(){return r.a.createElement(c.a,{center:[63.430515,10.395053],zoom:12},r.a.createElement(i.a,{url:"https://opencache.statkart.no/gatekeeper/gk/gk.open_gmaps?layers=norges_grunnkart&zoom={z}&x={x}&y={y}",attribution:"<a href='https://www.kartverket.no/'>Kartverket</a>"}),r.a.createElement(L,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[46,1,2]]]);
//# sourceMappingURL=main.b0d0372b.chunk.js.map